<!doctype html>

<!---UI skeleton of project-->
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Consonance and Dissonance Visualisation</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #fff;
    color: #111;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1 {
    font-size: 1.1rem;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .row {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 10px;
    max-width: 1100px;
    width: 100%;
  }

  .controls {
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:flex-start;
  }

  canvas {
    background: #fff;
    width: 92vw;
    margin: 8px 0;
    border: 1px solid #ccc;
  }

  #viz {
    height: 52vh;
  }

  #vizTime {
    height: 28vh;
  }

  button,
  input,
  select {
    margin: 0.5em;
    font-size: 14px;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    color: #555;
  }

  .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
  }
  
  .dot.a { background: red; opacity: 0.5; }
  .dot.b { background: deepskyblue; opacity: 0.5; }
  .dot.c { background: seagreen; opacity: 0.5; }
  .dot.d { background: orange; opacity: 0.5; }
  .dot.e { background: purple; opacity: 0.5; }
  .dot.f { background: rgb(218, 32, 196); opacity: 0.5; }

  input[type="range"] {
    width: 240px;
  }

  .col {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
    min-width: 260px;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 8px 12px;
  }

  label {
    display: flex;
    flex-direction: column;
    font-size: 14px;
    line-height: 1.3;
  }

  label.small {
    font-size: 13px;
    line-height: 1.3;
  }

  #pianoControlsA {
    border-top: 1px solid #ddd;
    margin-top: 4px;
    padding-top: 4px;
  }

  .note {
    font-size:12px;
    color:#666;
    line-height:1.3;
    max-width:240px;
    margin-top:-4px;
    margin-bottom:4px;
  }
</style>
</head>
<body>

<h1>Harmonics / Spectra Visualisation</h1>

<div class="row">
  <!-- Play/stop button and legend (colours match track)-->
  <button id="start">Start/Stop</button>
  <span class="chip"><span class="dot a"></span>A (red)</span>
  <span class="chip"><span class="dot b"></span>B (blue)</span>
  <span class="chip"><span class="dot c"></span>C (green)</span>
  <span class="chip"><span class="dot d"></span>D (orange)</span>
  <span class="chip"><span class="dot e"></span>E (purple)</span>
  <span class="chip"><span class="dot f"></span>F (gold)</span>
</div>


<!--toggle track on and off, wired to each track as showCheckboxes-->
<!--control whether audible and drawn-->
<div class="row" id="visToggles">
  <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showA" checked> Show A
  </label>
  <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showB" checked> Show B
  </label>
  <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showC" checked> Show C
  </label>
  <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showD" checked> Show D
  </label>
  <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showE" checked> Show E
  </label>
  <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showF" checked> Show F
  </label>
</div>


<div class="row">
  <!-- Column A controls -->
  <div class="col">
    <label>Engine A:
      <select id="engineA">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="pianoSample">Piano sample (FLAC)</option>
      </select>
    </label>

    <label>Freq A: 
  <input id="freqSliderA" type="range" min="50" max="2000" step="1">
  <input id="freqInputA" type="number" min="50" max="2000" step="1" style="width:70px">
  <span id="freqValA"></span>
</label>


    <!-- Additive params for A -->
    <label class="a-only">Inharmonicity A (B): <span id="BValA">0.000</span>
      <input id="BSliderA" type="range" min="0" max="0.01" step="0.0001" value="0.0000">
    </label>

    <label class="a-only">Pluck pos A (0..1): <span id="posValA">0.20</span>
      <input id="posSliderA" type="range" min="0.05" max="0.95" step="0.01" value="0.20">
    </label>

    <label class="a-only ks-only">Decay A (s): <span id="decayValA">2.0</span>
      <input id="decaySliderA" type="range" min="0.2" max="8" step="0.1" value="2">
    </label>

    <label class="a-only ks-only">Brightness A: <span id="brightValA">0.50</span>
      <input id="brightSliderA" type="range" min="0" max="1" step="0.01" value="0.50">
    </label>

    <!-- Piano sample controls for A -->
    <div class="a-only" id="pianoControlsA">
      <label class="small">Piano file (FLAC/WAV/etc):
        <input id="pianoFileA" type="file" accept=".flac,.wav,.mp3,.aiff,.aif,.ogg" />
      </label>

      <label class="small">Pitch A (Hz): <span id="pianoPitchValA">220</span>
        <input id="pianoPitchSliderA" type="range" min="50" max="1000" step="1" value="220">
      </label>

      <label class="small">Time A (s): <span id="pianoTimeValA">0.00</span>
        <input id="pianoTimeSliderA" type="range" min="0" max="5" step="0.01" value="0">
      </label>

      <button id="pianoPlayA">Play / Retrigger A</button>

      <div class="note">
        Load file and play
      </div>
    </div>
  </div>
</div>
</div>
<!-- Extra tracks Bâ€“F (simpler: engine + frequency only) -->
<div class="row" id="extraTracks">

  <div class="col">
    <label>Engine B:
      <select id="engineB">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
      </select>
    </label>

    <label>Freq B:
      <input id="freqSliderB" type="range" min="50" max="2000" step="1">
      <input id="freqInputB" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValB"></span>
    </label>
  </div>
  
  <div class="col">
    <label>Engine C:
      <select id="engineC">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
      </select>
    </label>

    <label>Freq C:
      <input id="freqSliderC" type="range" min="50" max="2000" step="1">
      <input id="freqInputC" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValC"></span>
    </label>
  </div>

  <div class="col">
    <label>Engine D:
      <select id="engineD">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
      </select>
    </label>

    <label>Freq D:
      <input id="freqSliderD" type="range" min="50" max="2000" step="1">
      <input id="freqInputD" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValD"></span>
    </label>
  </div>

  <div class="col">
    <label>Engine E:
      <select id="engineE">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
      </select>
    </label>

    <label>Freq E:
      <input id="freqSliderE" type="range" min="50" max="2000" step="1">
      <input id="freqInputE" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValE"></span>
    </label>
  </div>

  <div class="col">
    <label>Engine F:
      <select id="engineF">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
      </select>
    </label>

    <label>Freq F:
      <input id="freqSliderF" type="range" min="50" max="2000" step="1">
      <input id="freqInputF" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValF"></span>
    </label>
  </div>
</div>
<!-- Canvas 1: frequency-domain spectra (overlaid) -->
<canvas id="viz"></canvas>

<script src="tracks.js"></script>
<script src="main.js"></script>

</body>
</html>
