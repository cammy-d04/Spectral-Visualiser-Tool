<!doctype html>

<!---UI skeleton of project-->
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Consonance and Dissonance Visualisation</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #c5a4ff;
    color: #000000;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #layout {
  display: flex;
  width: 100%;
  max-width: 1500px;
  gap: 16px;
  align-items: flex-start;
}

#sidebar {
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 300px;
  flex-shrink: 0;
  background: #8b8b8a;
  border-right: 4px solid #5f5f5f;
  border-left: 10px solid #8b8b8a;
  border-top: 10px solid #8b8b8a;
  border-bottom: 10px solid #8b8b8a;

   /* scrollable stuff */
  height: calc(100vh - 80px); /* adjust if header is taller/shorter */
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 6px; /* stops content hiding under scrollbar */
}

#main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 12px;
  min-width: 0; /* stops overflow issues */
}

#maincontrols {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;          /* wraps nicely on smaller widths */
  align-items: center;
  gap: 10px;

  padding: 10px;
  background: #c7c7c7;
  border: 1px solid #373737;
  border-radius: 8px;
}

#visualisations {
  flex: 1;
  min-width: 0;
}

#vizRow {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  width: 100%;
}

#tuningPanel {
  width: 320px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

  h1 {
    font-size: 1.1rem;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .row {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 10px;
    max-width: 1100px;
    width: 100%;
  }

  .controls {
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
    justify-content:flex-start;
  }

  canvas {
    background: #fff;
    width: 100%;
    margin: 8px 0;
    border: 1px solid #ccc;
  }

  #viz {
    height: 35vh;
  }
  #viz2 {
    height: 35vh;
  }
  #auditionCents {
  width: 100%;
}
  

  button,
  input,
  select {
    margin: 0.5em;
    font-size: 14px;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    color: #555;
  }

  .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
  }
  
  .dot.a { background: red; opacity: 0.5; }
  .dot.b { background: deepskyblue; opacity: 0.5; }
  .dot.c { background: seagreen; opacity: 0.5; }
  .dot.d { background: orange; opacity: 0.5; }
  .dot.e { background: purple; opacity: 0.5; }
  .dot.f { background: rgb(218, 32, 196); opacity: 0.5; }

  input[type="range"] {
    width: 240px;
  }

  .col {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
    min-width: 260px;
    border: 1px solid #373737;
    border-radius: 8px;
    padding: 8px 12px;
    background: #c7c7c7;
  }

  label {
    display: flex;
    flex-direction: column;
    font-size: 14px;
    line-height: 1.3;
  }

  label.small {
    font-size: 13px;
    line-height: 1.3;
  }

  #pianoControlsA {
    border-top: 1px solid #ddd;
    margin-top: 4px;
    padding-top: 4px;
  }

  .note {
    font-size:12px;
    color:#666;
    line-height:1.3;
    max-width:240px;
    margin-top:-4px;
    margin-bottom:4px;
  }
</style>
</head>
<body>
<h1>Harmonics / Spectra Visualisation</h1>

<div id="layout">
  <div id="sidebar">
    <div class="col">
      <label>Engine A:
      <span class="chip"><span class="dot a"></span></span>
      <select id="engineA">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="file">Audio file</option>
      </select>
    </label>

    <label>Freq A:
      <input id="freqSliderA" type="range" min="50" max="2000" step="1">
      <input id="freqInputA" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValA"></span>
    </label>

    <label>Load file:
  <input type="file" id="fileInputA" accept="audio/*">
</label>
    <label>File Pitch A:
      <input id="filePitchA" type="range" min="0.25" max="4" value="1" step="0.01">
    </label>

      <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showA" checked> Show A
  </label>

</div>

  <div class="col">
    <label>Engine B:
      <span class="chip"><span class="dot b"></span></span>
      <select id="engineB">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="file">Audio file</option>
      </select>
    </label>

    <label>Freq B:
      <input id="freqSliderB" type="range" min="50" max="2000" step="1">
      <input id="freqInputB" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValB"></span>
    </label>

    <label>Load file:
  <input type="file" id="fileInputB" accept="audio/*">
</label>

    <label>File Pitch B:
      <input id="filePitchB" type="range" min="0.25" max="4" value="1" step="0.01">
    </label>

      <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showB" checked> Show B
  </label>

  </div>
  
  <div class="col">
    <label>Engine C:
      <span class="chip"><span class="dot c"></span></span>
      <select id="engineC">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="file">Audio file</option>

      </select>
    </label>

    <label>Freq C:
      <input id="freqSliderC" type="range" min="50" max="2000" step="1">
      <input id="freqInputC" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValC"></span>
    </label>

    <label>Load file:
  <input type="file" id="fileInputC" accept="audio/*">
</label>

    <label>File Pitch C:
      <input id="filePitchC" type="range" min="0.25" max="4" value="1" step="0.01">
    </label>

      <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showC" checked> Show C
  </label>
  </div>

  <div class="col">
    <label>Engine D:
      <span class="chip"><span class="dot d"></span></span>
      <select id="engineD">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="file">Audio file</option>

      </select>
    </label>

    <label>Freq D:
      <input id="freqSliderD" type="range" min="50" max="2000" step="1">
      <input id="freqInputD" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValD"></span>
    </label>

    <label>Load file:
  <input type="file" id="fileInputD" accept="audio/*">
</label>
    <label>File Pitch D:
      <input id="filePitchD" type="range" min="0.25" max="4" value="1" step="0.01">
    </label>

      <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showD" checked> Show D
  </label>

  </div>

  <div class="col">
    <label>Engine E:
      <span class="chip"><span class="dot e"></span></span>
      <select id="engineE">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="file">Audio file</option>
      </select>
    </label>

    <label>Freq E:
      <input id="freqSliderE" type="range" min="50" max="2000" step="1">
      <input id="freqInputE" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValE"></span>
    </label>

    <label>Load file:
  <input type="file" id="fileInputE" accept="audio/*">
</label>
    <label>File Pitch E:
      <input id="filePitchE" type="range" min="0.25" max="4" value="1" step="0.01">
    </label>

      <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showE" checked> Show E
  </label>

  </div>

  <div class="col">
    <label>Engine F:
      <span class="chip"><span class="dot f"></span></span>
      <select id="engineF">
        <option value="sinOsc">Sine oscillator</option>
        <option value="triangleOsc">Triangle oscillator</option>
        <option value="squareOsc">Square oscillator</option>
        <option value="add">String (additive)</option>
        <option value="file">Audio file</option>
      </select>
    </label>

    <label>Freq F:
      <input id="freqSliderF" type="range" min="50" max="2000" step="1">
      <input id="freqInputF" type="number" min="50" max="2000" step="1" style="width:70px">
      <span id="freqValF"></span>
    </label>

    <label>Load file:
  <input type="file" id="fileInputF" accept="audio/*">
</label>
    <label>File Pitch F:
      <input id="filePitchF" type="range" min="0.25" max="4" value="1" step="0.01">
    </label>


      <label style="flex-direction:row;align-items:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="showF" checked> Show F
  </label>

  </div>
  </div>




<div id="main">
  <div id="maincontrols">
    <button id="start">Start/Stop</button>
    <button id="pauseViz">Pause</button>
    <button id="masterLoop">Toggle Master Loop</button>

    <label>
      Loop interval (seconds):
      <input id="loopInterval" type="number" value="2" min="0.1" step="0.1">
    </label>

    <label>
      X-Zoom:
      <input type="range" id="xZoom" min="1" max="20" value="1" step="0.1">
    </label>
  </div>









<div id="vizRow">
  <div id="visualisations">
    <canvas id="viz"></canvas>
    <canvas id="viz2"></canvas>
    <div class="col" style="min-width:320px;">
  <div style="font-weight:600;margin-bottom:6px;">Interval audition</div>

  <label class="small">
    Cents: <span id="auditionCentsVal">0</span>
    <input id="auditionCents" type="range" min="0" max="1200" value="0" step="1">
  </label>

  <button id="auditionPlay">Play / Restart</button>
</div>

  </div>








<div id="tuningPanel">
  <div class="col" style="min-width:320px;">
  <div style="font-weight:600;margin-bottom:6px;">Peak picker</div>

  <label class="small">
    Threshold (fraction of max bin): <span id="threshFracVal">0.20</span>
    <input id="threshFrac" type="range" min="0.05" max="0.60" value="0.20" step="0.01">
  </label>

  <label class="small">
    Max peaks picked: <span id="maxPeaksVal">20</span>
    <input id="maxPeaksPicked" type="range" min="4" max="60" value="20" step="1">
  </label>

  <label class="small">
    Min separation (Hz): <span id="minSepHzVal">30</span>
    <input id="minSepHz" type="range" min="5" max="120" value="30" step="1">
  </label>

  <label class="small">
    Peak fMin (Hz): <span id="peakFMinVal">60</span>
    <input id="peakFMin" type="range" min="20" max="400" value="60" step="1">
  </label>
</div>

<div class="col" style="min-width:320px;">
  <div style="font-weight:600;margin-bottom:6px;">Dissonance curve</div>

  <label class="small">
    Amp compress: <span id="ampCompressVal">0.50</span>
    <input id="ampCompress" type="range" min="0.20" max="1.00" value="0.50" step="0.01">
  </label>

  <label class="small">
    Cents step:
    <select id="centsStep">
      <option value="1">1</option>
      <option value="5">5</option>
      <option value="10" selected>10</option>
      <option value="20">20</option>
      <option value="25">25</option>
    </select>
  </label>

    <label class="small">
    Viz2 track:
    <select id="v2trackselect">
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
      <option value="D">D</option>
      <option value="E">E</option>
      <option value="F">F</option>
    </select>
  </label>
</div>
</div>
</div>

</div>








<script src="audio-engines.js"></script>
<script src="tracks.js"></script>
<script src="static-spectrum.js"></script>
<script src="viz.js"></script>
<script src="sethares.js"></script>
<script src="main.js"></script>

</body>
</html>
